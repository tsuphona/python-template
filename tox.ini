[tox]
requires =
    tox>=4
env_list = py{38, 310}-{pytest, linting, typing}

[testenv]
deps =
    -rrequirements.txt

[testenv:py{38, 310}-pytest]
description = run unit tests
skip_install = true
deps =
    pytest>=7
    pytest-sugar
commands =
    pytest {posargs:tests}

[testenv:py{38, 310}-linting]
description = run linters
skip_install = true
deps =
    black==22.6
    flake8==6.0
commands =
    black --check .
    flake8 .

[testenv:py{38, 310}-typing]
description = run type checks
skip_install = true
deps =
    mypy>=0.991
commands =
    mypy {posargs:.}

[flake8]
max-line-length = 88
extend-ignore = E203
exclude =
    # The conf file is mostly autogenerated, ignore it
    docs/conf.py,
    # No need to check .tox directory
    .tox
